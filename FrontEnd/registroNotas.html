<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <title>Registro de Notas</title>
  </head>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 800px;
      margin: 50px auto;
      background: #fff;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      color: #333;
    }
    form {
      display: flex;
      flex-direction: column;
    }
    label {
      margin-top: 10px;
      font-weight: bold;
    }
    input,
    select {
      margin-top: 5px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
    }
    button {
      margin-top: 20px;
      padding: 10px;
      border: none;
      background: #5cb85c;
      color: #fff;
      font-size: 18px;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background: #4cae4c;
    }
    table {
      width: 100%;
      margin-top: 20px;
      border-collapse: collapse;
    }
    table,
    th,
    td {
      border: 1px solid #ccc;
    }
    th,
    td {
      padding: 10px;
      text-align: left;
    }
    th {
      background: #f4f4f4;
    }
    #sidebarMenu {
      position: fixed;
      top: 0;
      left: -300px;
      width: 300px;
      height: 100%;
      background-color: #343a40;
      transition: left 0.3s ease;
      z-index: 1050;
      box-shadow: 2px 0 5px rgba(219, 219, 219, 0.5);
    }

    #sidebarMenu.show {
      left: 0;
    }

    .sidebar-link {
      color: #ffffff;
      padding: 15px 20px;
      display: block;
      font-size: 16px;
      font-weight: 500;
      text-decoration: none;
    }

    .sidebar-link:hover {
      background-color: #898c8f;
    }

    .hamburger {
      font-size: 30px;
      cursor: pointer;
      margin: 10px;
    }

    .close-hamburger {
      font-size: 25px;
      color: #ffffff;
      cursor: pointer;
      position: absolute;
      top: -5px;
      right: 15px;
    }

    .navbar {
      background-color: #898c8f;
      padding: 10px;
    }

    .navbar-brand {
      color: #ffffff;
      font-size: 20px;
      font-weight: 600;
      text-decoration: none;
    }

    .navbar-brand:hover {
      color: #d4d4d4;
    }
  </style>
  <body>
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <span class="navbar-toggler-icon hamburger" id="hamburgerMenu"></span>
        <h3>Administrador</h3>
        <a class="navbar-brand">Admin</a>
      </div>
    </nav>

    <div id="sidebarMenu">
      <span id="closeSidebar" class="close-hamburger">&times;</span>
      <br />
      <ul class="navbar-nav">
        <li class="nav-item dropdown">
          <a class="nav-link sidebar-link" href="inicio.html">Inicio</a>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle sidebar-link"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            >Usuarios</a
          >
          <ul class="dropdown-menu">
            <li>
              <a class="dropdown-item" href="mantenimientoUsuarios.html"
                >Usuario</a
              >
            </li>
          </ul>
        </li>

        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle sidebar-link"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            >Mantenimiento</a
          >
          <ul class="dropdown-menu">
            <li>
              <a class="dropdown-item" href="mantenimientoCurso.html">Cursos</a>
            </li>
            <li>
              <a class="dropdown-item" href="mantenimientoParalelo.html"
                >Paralelo</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="mantenimientoAsig.html"
                >Asignaturas</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="cargaAcademica.html"
                >Plan de Estudio</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="mantenimientoInstitu.html"
                >Instituciones</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="mantenimientoDocente.html"
                >Docentes</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="mantenimientoAlumno.html"
                >Alumno</a
              >
            </li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle sidebar-link"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            >Registro-Calificaciones</a
          >
          <ul class="dropdown-menu">
            <li>
              <a class="dropdown-item" href="registroMatricula.html"
                >Registro de Matriculas</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="registroNotas.html"
                >Registro Notas</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="modificarNotas.html"
                >Modificar Notas</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="calculoProm.html"
                >Calculo Promedios</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="asignaturasRelacion.html"
                >Relacion Asignaturas</a
              >
            </li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle sidebar-link"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            >Boletines</a
          >
          <ul class="dropdown-menu">
            <li>
              <a class="dropdown-item" href="crearBoletin.html"
                >Generacion Boletines</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="promedioBoletin.html"
                >Generacion Boletines Promedio</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="crearBoletinMasivo.html"
                >Generacion Boletines Masivo</a
              >
            </li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle sidebar-link"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            >Reportes</a
          >
          <ul class="dropdown-menu">
            <li>
              <a class="dropdown-item" href="calculoProm.html"
                >Listado de Alumnos</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="listadoDocente.html"
                >Listado de Docentes</a
              >
            </li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link sidebar-link" href="index.html">Salir</a>
        </li>
      </ul>
    </div>
    <div class="container">
      <h1>Registro de Notas</h1>
      <form id="grade-form">
        <label for="course">Curso:</label>
        <select id="course" name="course" class="form-select" required>
          <option value="">Selecciona un curso</option>
          <option value="curso1">Curso 1</option>
          <option value="curso2">Curso 2</option>
          <option value="curso3">Curso 3</option>
        </select>

        <label for="parallel">Paralelo:</label>
        <select id="parallel" name="parallel" class="form-select" required>
          <option value="">Selecciona un paralelo</option>
          <option value="paraleloA">Paralelo A</option>
          <option value="paraleloB">Paralelo B</option>
          <option value="paraleloC">Paralelo C</option>
        </select>

        <label for="subject">Asignatura:</label>
        <select id="subject" name="subject" class="form-select">
          <option value="">Selecciona una asignatura</option>
          <option value="">Matematicas</option>
          <option value="">Ingles</option>
          <option value="">Fisica</option>
        </select>

        <label for="subject">Año Electivo:</label>
        <select id="subject" name="subject" class="form-select" required>
          <option value="">2022</option>
          <option value="">2023</option>
          <option value="">2024</option>
        </select>

        <label for="noteType">Tipo de Nota:</label>
        <select id="noteType" name="noteType" class="form-select" required>
          <option value="">Selecciona el tipo de nota</option>
          <option value="APORT">APORT</option>
          <option value="PRYINT">PRYINT</option>
          <option value="1TEX">1TEX</option>
        </select>

        <h2>Estudiantes</h2>
        <table>
          <thead>
            <tr>
              <th>Nombre del Estudiante</th>
              <th>Calificación</th>
            </tr>
          </thead>
          <tbody id="students-table-body">
            <!-- Los estudiantes y sus calificaciones se mostrarán aquí -->
          </tbody>
        </table>

        <button type="submit">Registrar Notas</button>
      </form>
      <form id="uploadForm" enctype="multipart/form-data">
        <input
          type="file"
          id="excelFile"
          name="excelFile"
          accept=".xlsx, .xls"
        />
        <button>Subir Excel</button>
      </form>
      <h2>Notas Registradas</h2>
      <table>
        <thead>
          <tr>
            <th>Nombre del Estudiante</th>
            <th>Curso</th>
            <th>Paralelo</th>
            <th>Asignatura</th>
            <th>Tipo de Nota</th>
            <th>Calificación</th>
          </tr>
        </thead>
        <tbody id="grades-table-body">
          <!-- Las notas registradas se mostrarán aquí -->
        </tbody>
      </table>
    </div>
    <script>
      document
        .getElementById("uploadForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          var formData = new FormData();
          var fileField = document.getElementById("excelFile");

          formData.append("excelFile", fileField.files[0]);

          fetch("/upload", {
            method: "POST",
            body: formData,
          })
            .then((response) => response.json())
            .then((result) => {
              console.log("Success:", result);
              alert("Archivo subido con éxito.");
            })
            .catch((error) => {
              console.error("Error:", error);
              alert("Error al subir el archivo.");
            });
        });
    </script>
    <script>
      document
        .getElementById("hamburgerMenu")
        .addEventListener("click", function () {
          var sidebar = document.getElementById("sidebarMenu");
          sidebar.classList.add("show");
        });

      document
        .getElementById("closeSidebar")
        .addEventListener("click", function () {
          var sidebar = document.getElementById("sidebarMenu");
          sidebar.classList.remove("show");
        });
    </script>
    <script>
      const subjectsByCourseParallel = {
        "curso1-paraleloA": ["Matemáticas", "Ciencias", "Historia"],
        "curso1-paraleloB": ["Matemáticas", "Ciencias"],
        "curso2-paraleloA": ["Literatura", "Arte"],
        // Agrega más combinaciones de curso y paralelo aquí
      };

      const studentsByCourseParallel = {
        "curso1-paraleloA": ["Juan Pérez", "María Gómez"],
        "curso1-paraleloB": ["Luis Martínez", "Ana Sánchez"],
        "curso2-paraleloA": ["Carlos Ruiz", "Lucía Fernández"],
        // Agrega más combinaciones de curso y paralelo aquí
      };

      document
        .getElementById("course")
        .addEventListener("change", updateSubjects);
      document
        .getElementById("parallel")
        .addEventListener("change", updateSubjects);

      function updateSubjects() {
        const course = document.getElementById("course").value;
        const parallel = document.getElementById("parallel").value;
        const subjectSelect = document.getElementById("subject");

        subjectSelect.innerHTML =
          '<option value="">Selecciona una asignatura</option>';

        if (course && parallel) {
          const key = `${course}-${parallel}`;
          const subjects = subjectsByCourseParallel[key] || [];

          subjects.forEach((subject) => {
            const option = document.createElement("option");
            option.value = subject;
            option.textContent = subject;
            subjectSelect.appendChild(option);
          });

          updateStudents();
        }
      }

      function updateStudents() {
        const course = document.getElementById("course").value;
        const parallel = document.getElementById("parallel").value;
        const studentsTableBody = document.getElementById(
          "students-table-body"
        );

        studentsTableBody.innerHTML = "";

        if (course && parallel) {
          const key = `${course}-${parallel}`;
          const students = studentsByCourseParallel[key] || [];

          students.forEach((student) => {
            const row = document.createElement("tr");

            row.innerHTML = `
              <td>${student}</td>
              <td><input type="number" class="form-control" step="0.1" required /></td>
            `;

            studentsTableBody.appendChild(row);
          });
        }
      }

      document
        .getElementById("grade-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const course = document.getElementById("course").value;
          const parallel = document.getElementById("parallel").value;
          const subject = document.getElementById("subject").value;
          const noteType = document.getElementById("noteType").value;
          const gradesTableBody = document.getElementById("grades-table-body");

          const studentsTableRows = document
            .getElementById("students-table-body")
            .querySelectorAll("tr");

          studentsTableRows.forEach((row) => {
            const studentName = row.children[0].textContent;
            const grade = row.children[1].querySelector("input").value;

            const newRow = document.createElement("tr");

            newRow.innerHTML = `
              <td>${studentName}</td>
              <td>${course}</td>
              <td>${parallel}</td>
              <td>${subject}</td>
              <td>${noteType}</td>
              <td>${grade}</td>
            `;

            gradesTableBody.appendChild(newRow);
          });

          // Limpiar los campos del formulario
          document.getElementById("grade-form").reset();
          document.getElementById("students-table-body").innerHTML = "";
        });
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
